identity:
  name: retrieve_knowledge
  author: juntiankeji
  label:
    en_US: 知识库查询
    ja_JP: 知识库查询
    zh_Hans: 知识库查询
    pt_BR: 知识库查询
description:
  human:
    en_US: 从指定知识库执行查询
    ja_JP: 从指定知识库执行查询
    zh_Hans: 从指定知识库执行查询
    pt_BR: 从指定知识库执行查询
  llm: retrieve from knowledge dataset

parameters:
  - name: api_base_url
    type: string
    label:
      en_US: API Base URL
    human_description:
      en_US: >-
        Knowledge API 的基础 URL，结尾带有 "/v1"。
        例如: "https://api.dify.ai/v1", "http://api:5001/v1"。缺省为compose内部host
      ja_JP: >-
        Knowledge API 的基础 URL，结尾带有 "/v1"。
        例如: "https://api.dify.ai/v1", "http://api:5001/v1"。缺省为compose内部host
      zh_Hans: >-
        Knowledge API 的基础 URL，结尾带有 "/v1"。
        例如: "https://api.dify.ai/v1", "http://api:5001/v1"。缺省为compose内部host
      pt_BR: >-
        Knowledge API 的基础 URL，结尾带有 "/v1"。
        例如: "https://api.dify.ai/v1", "http://api:5001/v1"。缺省为compose内部host
    required: false
    default: "http://nginx/v1"
    form: llm

  - name: api_key
    type: secret-input
    label:
      en_US: API Key
    human_description:
      en_US: >-
        The API key for the Knowledge API.
        You can generate it at "Knowledge" -> "API Access" -> "API Key" in the Dify Console.
      ja_JP: >-
        ナレッジ API の API キー。
        Dify のコンソールの "Knowledge" -> "API Access" -> "API Key" で発行できる。
      zh_Hans: >-
        Knowledge API 的 API 密钥。
        可以在 Dify 控制台的“Knowledge”->“API Access”->“API Key”中生成。
      pt_BR: >-
        A chave de API para o Knowledge API。
        Você pode gerá-la em "Knowledge" -> "API Access" -> "API Key" no Console Dify.
    required: false
    default: ""
    form: llm

  - name: knowledge_id
    type: string
    label:
      en_US: Knowledge ID
    human_description:
      en_US: >-
        要检索的数据库
      ja_JP: >-
        要检索的数据库
      zh_Hans: >-
        要检索的数据库
      pt_BR: >-
        要检索的数据库
    required: false
    default: ""
    form: llm

  - name: retrieve
    type: string
    label:
      en_US: Search Content
    human_description:
      en_US: >-
        检索参数
      ja_JP: >-
        检索参数
      zh_Hans: >-
        检索参数
      pt_BR: >-
        检索参数
    required: false
    default: ""
    form: llm

  - name: top_k
    type: number
    label:
      en_US: Top K
    human_description:
      en_US: >-
        Top K
      ja_JP: >-
        Top K
      zh_Hans: >-
        Top K
      pt_BR: >-
        Top K
    required: true
    default: "3"
    form: llm

  - name: extra_param
    type: string
    label:
      en_US: Extra Parameters 
    human_description:
      en_US: >-
        额外参数
      ja_JP: >-
        额外参数
      zh_Hans: >-
        额外参数
      pt_BR: >-
        额外参数
    required: false
    default: ""
    form: llm
extra:
  python:
    source: tools/retrieve_knowledge/retrieve_knowledge.py
